<div class="panel panel-default">
    <div class="panel-heading">
        <button type="button"
                data-ng-disabled="plan.isSyncing || planForm.$dirty" class="btn btn-primary pull-right"
                ng-click="plan.syncPrices()">
            {{planForm.$dirty ? 'You must save the changes in order to sync'
            :'Sync prices for all future reservations'}}
            <i class="fa fa-spinner fa-spin" ng-show="plan.isSyncing"></i>
        </button>
        <h3 class="panel-title">Plan</h3>
        <div class="clearfix"></div>
    </div>
    <div class="panel-body">
        <div class="row">
            <div class="col-md-7">
                <ng-form name="planForm">
                    <div class="row" ng-repeat="item in plan.planData track by $index" style="margin-bottom: 5px;">
                        <div class="col-md-4">
                            <p ng-if="item.isLocked">{{plan.humanizePlanNameEnum(item.name)}}</p>
                            <input type="text" class="form-control" ng-model="item.name" ng-if="!item.isLocked"
                                   ng-change="plan.updateFormValidity(planForm)" placeholder="Plan name"/>
                        </div>
                        <div class="col-md-3">
                            <div class="input-group">
                                <div class="input-group-addon" ng-show="plan.shouldDisplayDollar(item.planType)">
                                    $
                                </div>
                                <input class="form-control" type="text" placeholder="{{plan.inputPlaceholder}}"
                                       ng-model="item.value" ng-change="plan.updateFormValidity(planForm)"/>
                                <div class="input-group-addon" ng-show="plan.shouldDisplayPercent(item.planType)">
                                    %
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4"
                             ng-hide="item.planType === plan.PLAN_TYPES.TRANSACTION_COMMISSION || item.name === plan.PLAN_NAMES.WHITE_LABELING">
                            <div class="input-group">
                                <select class="form-control"
                                        ng-change="plan.updateFormValidity(planForm)"
                                        ng-options="option as plan.humanizePlanTypeEnum(option) for option in plan.injectPlanTypeOptions(item)"
                                        ng-model="item.planType">
                                </select>
                            </div>
                        </div>
                        <div class="col-md-1" ng-if="!item.isLocked">
                            <button type="button" class="btn btn-danger" ng-click="plan.deleteItem(item, planForm)">
                                <i class="fa fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <button type="button" class="btn btn-primary" ng-click="plan.addNewItem(planForm)">Add custom item
                    </button>
                </ng-form>
            </div>
            <div class="col-md-5">
                <!--Let other components enter as well-->
                <ng-transclude></ng-transclude>
            </div>
        </div>
    </div>
</div>
