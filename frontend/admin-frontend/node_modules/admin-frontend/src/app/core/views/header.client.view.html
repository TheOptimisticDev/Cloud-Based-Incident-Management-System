<div class="container-fluid" data-ng-controller="HeaderController as header" data-ng-init="header.init()">
	<div class="navbar-header">
		<a data-ui-sref="inbox.ticket({ticketId:''})">
			<img class="logo" src="/app/core/img/brand/logo.png" alt="Guesty" />
		</a>
	</div>
	<nav class="collapse navbar-collapse" role="navigation" data-ng-if="core.employee">
        <!-- left side menu + search -->
		<ul class="nav navbar-nav" data-ng-if="menu.shouldRender(core.employee);">

			<li data-ng-repeat="item in menu.items | orderBy: 'position'" data-ng-if="item.shouldRender(core.employee);" ng-switch="item.type" data-ng-class="{active: $state.includes(item.activeState)}" class="{{item.class}}" uib-dropdown="item.type === 'dropdown'">
				<a href="" role="button" ng-switch-when="dropdown" class="dropdown-toggle" uib-dropdown-toggle>
					<i class="glyphicon" data-ng-class="'glyphicon-' + item.icon"></i>
					<span data-ng-bind="item.title"></span>
					<b class="caret"></b>
				</a>
				<ul ng-switch-when="dropdown" class="dropdown-menu" uib-dropdown-menu>
					<li data-ng-repeat="subitem in item.items | orderBy: 'position'" data-ng-if="subitem.shouldRender(core.employee);" data-ui-sref-active="active">
						<a data-ui-sref="{{subitem.state}}" ng-if="subitem.state">
							<i class="glyphicon" data-ng-class="'glyphicon-' + subitem.icon"></i>
							<span data-ng-bind="subitem.title"></span>
						</a>
						<a href="{{subitem.url}}" target="_blank" ng-if="subitem.url">
							<i class="glyphicon" data-ng-class="'glyphicon-' + subitem.icon"></i>
							<span data-ng-bind="subitem.title"></span>
						</a>
					</li>
				</ul>
				<a ng-switch-default data-ui-sref="{{item.state}}" data-ui-sref-active="active">
					<i class="glyphicon" data-ng-class="'glyphicon-' + item.icon"></i>
					<span data-ng-bind="item.title"></span>
				</a>
			</li>
			<li class="typeahead-container">
				<div class="form-group">
					<div class="input-group">
						<input
						type="text"
						data-ng-model="search"
						placeholder="Search"
						data-uib-typeahead="items.name for items in typeahead($viewValue)"
						data-typeahead-wait-ms="50"
						data-typeahead-on-select="typeaheadSelect($item, $model, $label, $event)"
						data-typeahead-template-url="app/core/views/typeahead.client.view.html"
						data-typeahead-min-length="2"
						class="form-control">
						<span class="input-group-btn">
							<button class="btn btn-default typeahead-search" type="submit"><i class="glyphicon glyphicon-search"></i></button>
						</span>
					</div>
				</div>
			</li>
		</ul>

        <!-- user dropdown -->
		<ul class="nav navbar-nav navbar-right">
			<li class="dropdown" uib-dropdown>
				<a href="" role="button" class="dropdown-toggle user-header-dropdown-toggle" uib-dropdown-toggle>
					{{core.employee.username}} [{{core.employee.presentableName}}]
                    <b class="caret"></b>
				</a>
				<ul class="dropdown-menu" uib-dropdown-menu>
					<li data-ng-if="employee.isInInbox && !employee.pausedInboxAt"><a data-ng-click="pauseInbox()">Pause inbox</a></li>
                    <li data-ng-if="employee.isInInbox"><a data-ui-sref="my-tickets">My tickets</a></li>
                    <li data-ng-if="employee.isInInbox"><a data-ng-click="header.goToLastClosedTicket($event)">My last ticket</a></li>
                    <li><a data-ui-sref="team.updates">Team Updates</a></li>
					<li><a data-ng-click="signout()">Sign Out</a></li>
				</ul>
			</li>
		</ul>

        <!-- employee shift -->
		<ul class="nav navbar-nav navbar-right">
			<li data-ng-if="header.myself && !core.employee.preferences.hideTicketCounter">
                <div class="navbar-text">
                    <span class="badge badge-success" uib-tooltip="~{{header.myself.ticketsAvg}}/hour" tooltip-placement="bottom">{{header.myself.tickets}} <i class="fa fa-ticket"></i></span>
                </div>
            </li>
            <li data-ng-if="core.employee.isInShift && currentShift.checkIn">
				<span class="navbar-text">
					<timer start-time="currentShift.checkIn" interval="10000">{{hhours}}:{{mminutes}}</timer>
				</span>
			</li>
			<li class="navbar-switch-wrapper">
				<label class="switch switch-primary switch-md force">
					<input class="switch-input" data-ng-change="toggleShift(core.employee.isInShift)" data-ng-model="core.employee.isInShift" type="checkbox">
					<span class="switch-label" data-off="Off duty" data-on="Checked in"></span>
					<span class="switch-handle"></span>
				</label>
			</li>
		</ul>

        <!-- who's online -->
		<ul class="nav navbar-nav navbar-right currently-working">
			<li class="dropdown" uib-dropdown>
				<a href="#" class="dropdown-toggle" uib-dropdown-toggle>
                    <span data-ng-bind="header.activeReceptionists.length"></span> Online
				</a>
                <ul class="dropdown-menu" uib-dropdown-menu>
                    <li data-ng-repeat="user in header.activeReceptionists">
                        <span data-ng-bind="user.username"></span>
                        <i class="fa fa-circle text-success text-small" data-ng-if="user.online"></i>
                        <i class="fa fa-pause" data-ng-if="user.inPause"></i>
                    </li>
                </ul>
			</li>
		</ul>

	</nav>
</div>
