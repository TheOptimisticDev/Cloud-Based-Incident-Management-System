<div data-ng-controller="ReservationReviewController" data-ng-init="init()">
    <div data-ng-if="!review">
        <span data-ng-hide="reviewNotExists" class="label label-default"><i class="fa fa-spinner fa-spin"></i> Syncing..</span>
        <span data-ng-if="reviewNotExists">Review is not relevant anymore</span>
    </div>
    <div data-ng-if="review && sendSuccess">Review sent successfully.</div>
    <div data-ng-if="review && !sendSuccess">
        <div class="alert alert-info">
            <strong>Review Guidelines:</strong>
            <div class="whitespace-pre" data-ng-bind="reviewGuidelines || 'None.'"></div>
        </div>
        <div>
            <div class="pull-right">
                <div class="btn-group" uib-dropdown>
                    <button type="button" class="btn btn-default dropdown-toggle" uib-dropdown-toggle>
                        Templates <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu text-left dropdown-menu-right" role="menu" uib-dropdown-menu>
                        <li data-ng-repeat="template in reviewsTemplates.public_review" data-ng-class="{divider: template.divider}">
                            <a data-ng-if="!template.divider" data-ng-click="useReviewTemplate('publicReview', template)" data-ng-bind="template.title"></a>
                        </li>
                    </ul>
                </div>
            </div>
            <label>Public review</label>
            <p><textarea data-ng-model="review.publicReview" class="form-control" g-autoresize></textarea></p>
        </div>
        <hr>
        <div>
            <div class="pull-right">
                <div class="btn-group" uib-dropdown>
                    <button type="button" class="btn btn-default dropdown-toggle" uib-dropdown-toggle>
                        Templates <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu text-left dropdown-menu-right" role="menu" uib-dropdown-menu>
                        <li data-ng-repeat="template in reviewsTemplates.private_review" data-ng-class="{divider: template.divider}">
                            <a data-ng-if="!template.divider" data-ng-click="useReviewTemplate('privateReview', template.body)" data-ng-bind="template.title"></a>
                        </li>
                    </ul>
                </div>
            </div>
            <label>Private Guest Feedback</label>
            <p><textarea data-ng-model="review.privateReview" class="form-control" g-autoresize></textarea></p>
        </div>
        <hr>
        <div>
            <label>Cleanliness</label>
            <div>
                <uib-rating ng-model="review.ratingCleanliness" class="text-warning"></uib-rating>
            </div>
        </div>
        <hr>
        <div>
            <label>Communication</label>
            <div>
                <uib-rating ng-model="review.ratingCommunication" class="text-warning"></uib-rating>
            </div>
        </div>
        <hr>
        <div>
            <label>Observance of House Rules</label>
            <div>
                <uib-rating ng-model="review.ratingObservance" class="text-warning"></uib-rating>
            </div>
        </div>
        <hr>
        <div>
            <label>Would you recommend this guest?</label>
            <label class="switch switch-primary force">
                <input class="switch-input" type="checkbox" data-ng-model="review.wouldRecommend">
                <span class="switch-label" data-off="No" data-on="Yes!"></span>
                <span class="switch-handle"></span>
            </label>
        </div>
        <button class="btn btn-success" data-ng-click="save()">Submit Review</button>
    </div>
</div>
