'use strict';

//Reservations service used to communicate Reservations REST endpoints
angular.module('reservations').factory('Reservations', [
    '$resource',
    'AppConfig',
    function($resource, AppConfig) {

        var baseApi2Url = AppConfig.API_URL;
        var baseApiOldUrl = AppConfig.API_OLD_URL;

        return $resource(baseApiOldUrl + 'reservations/:reservationId/:action', {
            reservationId: '@_id'
        }, {
            getApi2: {
                url: baseApi2Url + 'reservations/:reservationId',
                method: 'GET'
            },
            queryApi2: {
                url: baseApi2Url + 'reservations',
                method: 'GET'
            },
            query: {
                isArray: false,
                method: 'POST',
                params: {
                    action: 'search'
                }
            },
            list: {
                isArray: true,
                method: 'GET'
            },
            update: {
                url: baseApi2Url + 'reservations/:reservationId',
                method: 'PUT'
            },
            conversation: {
                isArray: false,
                method: 'GET',
                params: {
                    action: 'conversation'
                }
            },
            setReservationAlterReservation: {
                isArray: false,
                method: 'PUT',
                params: {
                    action: 'alter'
                }
            },
            checkReservationAlterReservationPrice: {
                isArray: false,
                method: 'POST',
                params: {
                    action: 'alter-price'
                }
            },
            ignore: {
                method: 'PUT',
                params: {
                    action: 'ignore'
                }
            },
            preApprove: {
                method: 'PUT',
                params: {
                    action: 'pre-approve'
                }
            },
            approval: {
                method: 'PUT',
                params: {
                    action: 'approval'
                }
            },
            verifyGuest: {
                method: 'POST',
                params: {
                    action: 'verify-guest'
                }
            },
            specialOffer: {
                method: 'POST',
                params: {
                    action: 'special-offer'
                }
            },
            log: {
                method: 'POST',
                params: {
                    action: 'log'
                }
            },
            reservationBox: {
                method: 'GET',
                params: {
                    action: 'reservation-box'
                }
            },
            guest: {
                method: 'GET',
                isArray: false,
                params: {
                    action: 'guest'
                }
            },
            pendingRequests: {
                method: 'GET',
                isArray: true,
                params: {
                    action: 'pending-requests'
                }
            },
            updatePreBooking: {
                method: 'PUT',
                params: {
                    action: 'pre-booking'
                }
            },
            related: {
                method: 'GET',
                isArray: true,
                params: {
                    action: 'related'
                }
            },
            ofGuest: {
                method: 'GET',
                isArray: true,
                params: {
                    action: 'of-guest'
                }
            }
        });
    }
]);
