'use strict';

// Reservations controller
angular.module('reservations').controller('ReservationReceptionistsBoxController', [
    '$scope',
    'notify',
    'CommonService',
    'Reservations',
    function($scope, notify, CommonService, Reservations) {

        $scope.ignoreReservation = function(){
            CommonService.confirm('Are you sure?', 'This will remove this reservation from the system. All incoming messages in regarding to this reservation will be ignored, and hooks will not be sent.')
                .then(function(){
                    var reason = prompt('What is the reason?') || 'By admin';

                    Reservations.ignore({_id: $scope.reservation._id, reason: reason}, function() {
                        notify({message: 'Reservation ignored successfully', classes: 'alert-success'});
                        $scope.init();
                    }, function() {
                        notify({message: 'Reservation update failed', classes: 'alert-danger'});
                    });

                });
        };
    }
]);
