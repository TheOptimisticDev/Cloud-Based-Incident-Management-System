<div data-ng-controller="AccountContactsController" data-ng-init="init()">
    <form name="form">
        <div class="page-header">
            <h1>
                <span class="pull-right">
                    <button type="button" class="btn btn-default" ng-click="openLogModal('contacts')" title="logs"><i class="fa fa-history"></i></button>
                </span>
                Contacts
            </h1>
        </div>

        <p data-ng-if="!contacts.count">No contact found</p>

        <div data-ng-repeat="contact in contacts.results track by contact._id">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <div class="pull-right">
                        <a class="btn btn-xs btn-default" data-ui-sref="conversations.create({accountId: account._id, contactId: contact._id})">Create new conversation</a>
                        <a class="btn btn-xs btn-default" data-ui-sref="account.conversations({accountId: account._id, contactId: contact._id, conversationWith: 'Contact'})">Conversations list</a>
                    </div>
                    <h3 class="panel-title" data-ng-bind="contact.fullName"></h3>
                </div>
                <div class="panel-body">
                    <div class="input-group form-group" data-ng-if="contact.emails" data-ng-repeat="email in contact.emails">
                        <i class="fa fa-envelope"></i>
                        <span data-ng-bind="email"></span>
                        <i class="fa fa-star" data-ng-if="email===contact.email"></i>
                    </div>
                    <div class="input-group form-group" data-ng-if="contact.phones" data-ng-repeat="phone in contact.phones">
                        <i class="fa fa-phone"></i>
                        <span data-ng-bind="phone"></span>
                        <i class="fa fa-star" data-ng-if="phone===contact.phone"></i>
                    </div>
                    <div class="form-group" data-ng-if="contact.preferredContactMethod">
                        Prefers: <span data-ng-bind="contact.preferredContactMethod || '----'"></span>
                    </div>
                    <div class="input-group form-group" data-ng-if="contact.notes">
                        <i class="fa fa-edit"></i>
                        <span data-ng-bind="contact.notes"></span>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>
