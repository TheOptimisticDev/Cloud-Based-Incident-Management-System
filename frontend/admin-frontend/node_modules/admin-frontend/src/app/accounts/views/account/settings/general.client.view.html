<div ng-if="account.$resolved" class="account">
    <panel title="'General'">
        <div class="form-group">
            <div class="pull-right">
                <a data-ng-click="toggleIsManaged()" class="btn"
                   data-ng-class="{'btn-success':!account.active, 'btn-danger':account.active}">
                    <span data-ng-if="account.active">Cancel</span>
                    <span data-ng-if="!account.active">Activate</span>
                </a>
            </div>
            <strong>Active:</strong>
            <i data-ng-if="account.active" class="fa fa-2x fa-check text-success">Yes</i>
            <i data-ng-if="!account.active" class="fa fa-2x fa-times text-danger">No</i>
        </div>
        <div class="form-group">
            <i class="fa fa-calendar"></i>
            <label>Created at:</label>
            <span>{{account.createdAt | date:'short'}}</span>
        </div>
        <div class="form-group">
            <label>Account name:</label>
            <span data-ng-bind="account.name"></span>
        </div>
        <div class="form-group">
            <label>Account manager:</label>
            <employee-selector limit-role="account-manager" selected="account.internalData.accountManager" on-change="settings.updateAccountManager(selected)"></employee-selector>
        </div>
        <div class="form-group">
            <label>Sales person:</label>
            <employee-selector limit-role="sales" selected="account.internalData.salesPerson" on-change="settings.updateSalesPerson(selected)">
        </div>
        <div class="form-group">
            <label>On boarding status:</label>
            <onboarding-status selected="account.internalData.onboardingStatus" on-change="settings.updateOnBoardingStatus(selected)"></onboarding-status>
        </div>
        <div class="form-group">
            <label>Managed by:</label>
            <select-picker options="managedByOpts" ng-model="account.internalData.managedBy"></select-picker>
        </div>
    </panel>

    <payment-plan plan-data="account.plan" on-change="settings.planCallBack"></payment-plan>
    <one-time-payment>
    </one-time-payment>

    <panel title="'Account Categorization'">
        <div class="form-group">
            <label>This account is:</label>
            <fish-icon data-ng-model="account.accountCategorization"></fish-icon>
            <div class="btn-group" uib-dropdown>
                <button type="button" class="btn btn-default dropdown-toggle btn-sm" uib-dropdown-toggle>
                    <span data-ng-if="account.accountCategorization===null">Select</span> <span
                        class="caret"></span>
                </button>
                <ul class="dropdown-menu" uib-dropdown-menu>
                    <li data-ng-repeat="i in [0,1,2,3,4,5]"><a href="#" data-ng-click="setAccountCategory($index)">
                        <fish-icon data-ng-model="$index"></fish-icon>
                    </a></li>
                </ul>
            </div>
        </div>
        <div class="form-group" data-ng-if="authentication.isAdmin()">
            <label>Avoid automatic categorization</label>
            <label class="switch switch-primary force">
                <input class="switch-input" name="accountCategorizationIsManual" type="checkbox"
                       data-ng-model="account.accountCategorizationIsManual">
                <span class="switch-label" data-off="No" data-on="Yes"></span>
                <span class="switch-handle"></span>
            </label>
        </div>
    </panel>
    <panel title="'White label'">
        <div class="form-group">
            <label>Brand name</label>
            <input type="text" class="form-control" data-ng-model="account.whiteLabel.brand.name"
                   placeholder="Guesty"
                   disabled>
        </div>
        <div class="form-group">
            <label>Brand picture</label>
            <img data-ng-if="account.whiteLabel.brand.picture" data-ng-src="{{account.whiteLabel.brand.picture}}">
            <span data-ng-if="!account.whiteLabel.brand.picture" class="text-muted">Guesty</span>
        </div>
        <div class="form-group">
            <label>Domain</label>
            <input type="text" class="form-control" data-ng-model="account.whiteLabel.appDomain"
                   placeholder="app.guesty.com" disabled>
        </div>
        <div class="form-group">
            <label>Default domain for <strong>new</strong> proxy emails</label>
            <select-picker options="whiteLabelIntegrationDomains"
                           ng-model="account.whiteLabel.integrationsEmailDomain"
                           placeholder="user.guesty.com"></select-picker>
        </div>
        <div class="form-group">
            <label>White label app</label>
            <label class="switch switch-primary force">
                <input class="switch-input" name="shouldWhiteLabelApp" type="checkbox"
                       data-ng-model="account.whiteLabel.shouldWhiteLabelApp">
                <span class="switch-label" data-off="No" data-on="Yes"></span>
                <span class="switch-handle"></span>
            </label>
        </div>
        <hr>
        <!-- Owners Portal
        ====================================== -->
        <div class="form-group">
            <label>White label Owners Portal</label>
            <label class="switch switch-primary force">
                <input class="switch-input" name="shouldWhiteLabelOwnersPortal" type="checkbox"
                       data-ng-model="ownersPortal.whiteLabel.active"
                       ng-change="settings.ownersPortalWhiteLabelHasChanged = true; settings.activateOwnersPortalWhiteLabelFeatures()">
                <span class="switch-label" data-off="No" data-on="Yes"></span>
                <span class="switch-handle"></span>
            </label>
        </div>

        <div class="ml40" ng-if="ownersPortal.whiteLabel.active">

            <div class="form-group">
                <label>Allow custom domain</label>
                <label class="switch switch-primary force">
                    <input class="switch-input" name="shouldAllowCustomDomain" type="checkbox"
                           data-ng-model="ownersPortal.whiteLabel.customDomain"
                           ng-change="settings.ownersPortalWhiteLabelHasChanged = true">
                    <span class="switch-label" data-off="No" data-on="Yes"></span>
                    <span class="switch-handle"></span>
                </label>
            </div>

            <div class="form-group">
                <label>Remove “powered by Guesty”</label>
                <label class="switch switch-primary force">
                    <input class="switch-input" name="shouldWhiteLabelApp" type="checkbox"
                           data-ng-model="ownersPortal.whiteLabel.poweredByGuesty"
                           ng-change="settings.ownersPortalWhiteLabelHasChanged = true">
                    <span class="switch-label" data-off="No" data-on="Yes"></span>
                    <span class="switch-handle"></span>
                </label>
            </div>
        </div>
    </panel>
</div>