<section data-ng-controller="IntegrationsController as integrationsCtrl" data-ng-init="integrationsCtrl.loadIntegrations()">
    <div class="page-header">
        <div class="pull-right">
            <div class="btn-group" uib-dropdown>
                <button type="button" class="btn btn-default" uib-dropdown-toggle>
                    Add new integration
                    <span class="caret"></span>
                </button>
                <ul uib-dropdown-menu role="menu">
                    <li role="menuitem"><a href="" data-ng-click="integrationsCtrl.addNewAirbnb()">Airbnb</a></li>
                    <li role="menuitem"><a href="" data-ng-click="integrationsCtrl.addNewRentalsUnited()">Rentals United</a></li>
                </ul>
            </div>
            <button type="button" class="btn btn-primary" ng-click="openLogModal('integrations')" title="logs"><i class="fa fa-history"></i></button>
        </div>
        <h1>
            Integrations
            <span class="badge badge-default" data-ng-bind="integrations.count"></span>
        </h1>
    </div>

    <div data-ng-if="integrations.$resolved">
        <div data-ng-if="integrations.results.length">
            <ul class="list-group">
                <li class="list-group-item" data-ng-repeat="integration in integrations.results">
                    <span class="pull-right label label-success" data-ng-if="integration.active">Active</span>
                    <span class="pull-right label label-danger" data-ng-if="!integration.active">Inactive</span>
                    <a href="" data-ui-sref="account.integration({integrationId:integration._id})">
                        <strong data-ng-bind="integration.platform"></strong>:
                        <strong data-ng-bind="integration.nickname"></strong>
                        <span data-ng-bind="integration.fullName || '(No presentable name)'"></span>
                    </a>
                </li>
            </ul>
            <div class="text-center" data-ng-show="integrations.count > integrationsCtrl.limit">
                <uib-pagination data-ng-model="integrationsCtrl.page" items-per-page="integrationsCtrl.limit" total-items="integrations.count" ng-change="integrationsCtrl.loadIntegrations()" next-text="»" previous-text="«"></uib-pagination>
            </div>
        </div>
        <div data-ng-if="!integrations.results.length">
            None.
        </div>
    </div>
</section>
