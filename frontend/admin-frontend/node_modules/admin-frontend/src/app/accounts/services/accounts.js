'use strict';

//Accounts service used to communicate Accounts REST endpoints
angular.module('accounts').factory('Accounts', [
	'$resource',
	'AppConfig',
	function($resource, AppConfig){
		var baseApi2Url = AppConfig.API_URL;
		var baseApiOldUrl = AppConfig.API_OLD_URL;

		return $resource(baseApiOldUrl + 'accounts/:accountId/:action', {
			accountId: '@_id'
		}, {
			query: {
				isArray: false
			},
			save: {
				method: 'PUT'
			},
			getApi2: {
				method: 'GET',
				url: baseApi2Url + 'accounts/:accountId'
			},
			updateApi2: {
				method: 'PUT',
				url: baseApi2Url + 'accounts/:accountId'
			},


			files: {
				isArray: true,
				params: {
					action: 'files',
					fields: '_id'
				}
			},
			cancel: {
				params: {
					action: 'cancel',
					fields: '_id'
				}
			},
			logs: {
				isArray: false,
				params: {
					action: 'logs'
				}
			},
			categories: {
				isArray: true,
				params: {
					action: 'categories'
				}
			},
			deactivate: {
				method: 'DELETE',
				params: {
					action: 'deactivate'
				}
			},
			activate: {
				method: 'POST',
				params: {
					action: 'activate'
				}
			},
			typeahead: {
				isArray: true,
				params: {
					action: 'typeahead'
				}
			},
			updateReservationCommission: {
				method: 'POST',
				url: baseApi2Url + 'accounts/:accountId/update-reservations-commission'
			}
		});
	}
]);
