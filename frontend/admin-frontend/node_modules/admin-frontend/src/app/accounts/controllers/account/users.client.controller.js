'use strict';

// Accounts controller
angular.module('accounts').controller('AccountUsersController', [
    '$scope',
    '$stateParams',
    'User',
    function ($scope, $stateParams, User) {

        $scope.init = function () {
            $scope.currentPage = 1;
            $scope.limit = 25;
            $scope.fetch();
        };

        $scope.fetch = function () {
            User.query({
                accountId: $stateParams.accountId,
                fields: 'fullName',
                skip: ($scope.currentPage - 1) * $scope.limit,
                limit: $scope.limit
            }).$promise.then(function (response) {
                $scope.users = response.results;
                $scope.totalItems = response.count;
            });
        }

    }
]);
