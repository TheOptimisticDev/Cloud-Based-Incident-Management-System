'use strict';

angular.module('conversations').factory('ConversationsModalsService', [
    '$uibModal',
    function ($uibModal) {
        // Conversations modals service logic
        // ...

        // Public API
        return {
            /**
             * opens modal for conversation thread and post
             * @param conversationId {String}
             * @param reservation {String}
             * @returns {*}
             */
            openConversationModal: function(conversationId, reservation) {
                return $uibModal.open({
                    templateUrl: 'app/conversations/views/conversation/conversation.client.view.html',
                    controller: function($scope) {
                        $scope.conversationId = conversationId;
                        if (reservation){
                            $scope.reservation = reservation;
                        }
                    },
                    size: 'lg',
                    windowClass: 'modal-padded'
                }).result;
            },
            openCustomerSupportModal: function(account, userId, subject, publicNote, privateNote, unedtiablePrivateNote) {
                return $uibModal.open({
                    templateUrl: 'app/conversations/views/customer-support-modal.client.view.html',
                    controller: 'CustomerSupportModalController',
                    size: 'md',
                    resolve: {
                        modalInput: function(){
                            return {
                                account: account,
                                userId: userId,
                                subject: subject,
                                publicNote: publicNote,
                                privateNote: privateNote,
                                uneditablePrivateNote: unedtiablePrivateNote
                            };
                        }
                    }
                }).result;
            }
        };
    }
]);
