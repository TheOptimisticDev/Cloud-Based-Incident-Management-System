'use strict';

//Conversations service used to communicate Conversations REST endpoints
angular.module('conversations').factory('Conversations', [
    '$resource',
    'AppConfig',
    function ($resource, AppConfig) {

        var baseApi2Url = AppConfig.API_URL;
        var baseApiOldUrl = AppConfig.API_OLD_URL;
        
        return $resource(baseApiOldUrl + 'conversations/:conversationId/:action', {
            conversationId: '@_id'
        }, {
            query: {
                isArray: false,
                method: 'POST',
                params: {
                    action: 'search'
                }
            },
            update: {
                method: 'PUT'
            },
            availableModules: {
                method: 'GET',
                isArray: true,
                params: {
                    action: 'available-modules'
                }
            },
            dashboard: {
                method: 'POST',
                params: {
                    action: 'dashboard'
                }
            }
        });
    }
]);
