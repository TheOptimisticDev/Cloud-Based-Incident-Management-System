<div data-ng-controller="EmployeesListController as listCtrl" data-ng-init="listCtrl.init()">
    <div class="page-header">
        <div class="pull-right">
            <div class="btn-group" uib-dropdown>
                <button type="button" class="btn btn-default dropdown-toggle btn-sm" uib-dropdown-toggle>
                    <i class="fa fa-filter"></i>
                    Filter active:
                    <strong data-ng-if="listCtrl.filteredActive===null">All</strong>
                    <strong data-ng-if="listCtrl.filteredActive===true">Active</strong>
                    <strong data-ng-if="listCtrl.filteredActive===false">Inactive</strong>
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu right-aligned" role="menu">
                    <li><a href="" data-ng-click="listCtrl.filterByActive(null)">All</a></li>
                    <li><a href="" data-ng-click="listCtrl.filterByActive(true)">Active</a></li>
                    <li><a href="" data-ng-click="listCtrl.filterByActive(false)">Inactive</a></li>
                </ul>
            </div>
            <div class="btn-group" uib-dropdown>
                <button type="button" class="btn btn-default dropdown-toggle btn-sm" uib-dropdown-toggle>
                    <i class="fa fa-filter"></i>
                    Filter role:
                    <strong data-ng-if="!listCtrl.filteredRole">All</strong>
                    <strong data-ng-bind="listCtrl.filteredRole"></strong> <span class="caret"></span>
                </button>
                <ul class="dropdown-menu right-aligned" role="menu">
                    <li><a href="" data-ng-click="listCtrl.filterByRole(null)">All</a></li>
                    <li data-ng-repeat="role in listCtrl.availableRoles" data-ng-click="listCtrl.filterByRole(role)">
                        <a href="" data-ng-bind="role"></a>
                    </li>
                </ul>
            </div>
        </div>
        <h1>
            Employees
            <a data-ui-sref="admin.employee({employeeId:'new'})" class="btn btn-default">Add new</a>
        </h1>
    </div>

    <table class="table">
        <thead>
            <tr>
                <th>#</th>
                <th>Username</th>
                <th>Presentable name</th>
                <th>Roles</th>
                <th>Activity</th>
                <th>Created</th>
            </tr>
        </thead>
        <tbody>
            <tr data-ng-repeat="employee in listCtrl.employees.results">
                <td data-ng-bind="$index+1+((listCtrl.page-1)*listCtrl.limit)"></td>
                <td><a href="" data-ui-sref="admin.employee({employeeId:employee._id})" data-ng-bind="employee.username"></a></td>
                <td data-ng-bind="employee.presentableName"></td>
                <td data-ng-bind="employee.roles.join(', ')"></td>
                <td>
                    <span class="label label-danger" data-ng-if="!employee.isActive">Inactive</span>
                    <span class="label label-info" data-ng-if="employee.isInShift">In Shift</span>
                    <span class="label label-info" data-ng-if="employee.isInInbox">In Inbox</span>
                </td>
                <td><span data-ng-if="employee.created" am-time-ago="employee.created" title="{{employee.created|date}}"></span></td>
            </tr>
        </tbody>
    </table>

    <div class="text-center" data-ng-show="listCtrl.employees.count > listCtrl.limit">
        <uib-pagination ng-model="listCtrl.page" items-per-page="listCtrl.limit" total-items="listCtrl.counter" ng-change="listCtrl.loadList()" next-text="»" previous-text="«" max-size="10"></uib-pagination>
    </div>
</div>
