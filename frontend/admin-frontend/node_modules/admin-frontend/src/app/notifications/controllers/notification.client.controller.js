'use strict';

// Notifications controller
angular.module('notifications').controller('NotificationController', [
    '$scope',
    'Notifications',
    'Translate',
    'gNotify',
    function ($scope, Notifications, Translate, gNotify) {
        $scope.showReply = function () {
            $scope.isReplyOpen = true;
        };

        /**
         * send to google-translate and replace with current body.
         */
        $scope.translateNotification = function () {
            Translate.translateText([$scope.notification], 'body').then(function (googleTranslateResults) {
                $scope.notification.body = googleTranslateResults[0];
                $scope.hideTranslateButton = true;
            }, function () {
                gNotify.alert('Could not translate the text');
            });
        };

        Notifications.get({
            notificationId: $scope.notificationId
        }, function (notification) {
            $scope.notification = notification;

            $scope.newConversationParams = {
                notificationId: $scope.notificationId,
                accountId: $scope.notification.account._id
            };
        });
    }
]);
