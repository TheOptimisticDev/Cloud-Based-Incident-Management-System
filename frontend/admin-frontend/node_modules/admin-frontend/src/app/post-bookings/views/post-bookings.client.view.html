<section data-ng-controller="PostBookingTicketsController" class="post-booking">
    <div class="page-header">
        <h1>Post booking tickets</h1>
    </div>
    <div class="page-body">
        <div class="col-lg-12">
            <div data-ng-repeat="(id, item) in tickets" data-code="{{item.code}}" data-id="{{item.id}}" class="item" data-ng-class="{'bg-danger': item.deleted}">
                <div class="pull-right">
                    <div class="options">
                        <button class="btn btn-default open" data-ng-click="openReservationLogModal(item.reservationId)" title="reservation log modal"><i class="glyphicon glyphicon-list-alt"></i></button>
                        <button class="btn btn-default open" data-ng-click="openReservationModal(item.reservationId)" title="reservation modal"><i class="glyphicon glyphicon-search"></i></button>
                        <button class="btn btn-default open" data-ng-click="view()"><i class="glyphicon glyphicon-eye-open"></i></button>
                        <button class="btn btn-default labels" data-ng-click="label(item)"><i class="glyphicon glyphicon-tag"></i></button>
                        <button class="btn btn-warning mark" data-ng-click="mark(item)"><i class="glyphicon glyphicon-log-in"></i></button>
                        <button class="btn btn-success done" data-ng-if="!item.deleted" data-ng-click="done(item)"><i class="glyphicon glyphicon-ok"></i></button>
                        <button class="btn btn-primary undo" data-ng-if="item.deleted" data-ng-click="undo(item)"><i class="fa fa-undo"></i></button>
                    </div>

                    <div class="text-right status">
                        <span class="text-center" data-ng-class="item.reservation.postBooking.colorHost || defaultStatusClass">
                            <i class="fa fa-user"></i>
                        </span>
                        <span class="text-center" data-ng-class="item.reservation.postBooking.colorGuest || defaultStatusClass">
                            <i class="fa fa-suitcase"></i>
                        </span>
                        <span class="text-center" data-ng-class="item.reservation.postBooking.colorCleaning || defaultStatusClass">
                            <i class="fa fa-magic"></i>
                        </span>
                    </div>
                </div>
                <div>
                    <label>Account:</label>
                    <a data-ui-sref="account.settings({accountId: item.accountId})" target="_blank" data-ng-bind="item.account.name"></a>
                </div>
                <div data-ng-if="item.listingId" class="listing">
                    <label>Listing:</label>
                    <a data-ui-sref="listing.settings({listingId: item.listingId})" target="_blank" data-ng-bind="item.listing.title"></a>
                </div>
                <div data-ng-if="item.guest.fullName">
                    <label>Guest:</label>
                    {{item.guest.fullName}}
                </div>
                <div>{{item.title}}</div>
                <div class="time" data-am-time-ago="item.createdAt"></div>
                <span data-ng-if="isHookIssue(item)" class="bg-danger" data-ng-bind-html="item.html | trustedHtml"></span>
                <div class="extra">
                    <span data-ng-if="item.deleted" class="label label-danger" data-ng-bind="item.deleted"></span>
                    <span data-ng-if="item.labels" class="label label-info" data-ng-bind="item.labels"></span>
                    <span data-ng-if="item.employee" class="label label-warning" data-ng-bind="item.employee"></span>
                </div>
            </div>
        </div>
    </div>
</section>
