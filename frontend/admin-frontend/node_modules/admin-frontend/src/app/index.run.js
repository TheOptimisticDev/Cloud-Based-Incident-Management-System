(function() {
    'use strict';

    /** @ngInject */
    function runBlock($log, $rootScope, $state, $window, Events) {

        $rootScope.$state = $state;

        $rootScope.$on('$stateChangeSuccess', function(event, toState){
            $window.analytics.page(toState.name, toState)
        });

        $log.debug('runBlock end');

        Events.registerAllListeners();

    }

    angular.module('guestyAdmin').run(runBlock);

})();
