'use strict';

angular.module('dashboard').controller('TransactionItemController', [
    '$scope',
    function($scope) {

        function loadConversation() {
            if($scope.tab.isNewConversation) {
                $scope.newConversationParams = {
                    accountId: _.get($scope , 'reservation.accountId', $scope.ticket.accountId),
                    reservationId: $scope.ticket.reservationId,
                    contactId: $scope.tab.contactId || null,
                    userId: $scope.tab.userId || null
                };
            } else {
                $scope.conversationId = $scope.tab.id;
            }
        }

        function loadNotification() {
            $scope.notificationId = $scope.tab.id;
        }

        function loadReview() {
            $scope.reservationId = $scope.tab.id;
        }

        function loadTodo() {
            $scope.todoId = $scope.tab.id;
        }

        (function init() {
            switch($scope.tab.type) {
                case 'conversation':
                    loadConversation();
                    break;
                case 'notification':
                    loadNotification();
                    break;
                case 'review':
                    loadReview();
                    break;
                case 'todo':
                    loadTodo();
                    break;
            }
        })();
    }
]);
