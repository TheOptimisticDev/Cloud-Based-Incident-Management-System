<div data-ng-if="['inquiry', 'reserved'].indexOf(reservation.status)!==-1">
    <div class="dashboard-box dashboard-prebooking-box" data-ng-controller="DashboardPreBookingBoxController as preBooking" data-ng-init="preBooking.init()">
        <div class="dashboard-box-loader" data-ng-if="!preBooking.$resolved">
            <img src="/app/core/img/loaders/loader.gif" alt="Loading"><span></span>
        </div>
        <ul class="prebooking-list" data-ng-if="preBooking.$resolved && preBooking.noNeed">
            <li><h4 class="text-center">No need to screen</h4></li>
        </ul>
        <ul class="prebooking-list" data-ng-if="preBooking.$resolved && !preBooking.noNeed">
            <li>
                <h4 class="text-center">Screening checklist</h4>
                <div class="row">
                    <div class="col-sm-6">
                        When OK: <span class="label" data-ng-class="{'label-success':preBooking.listing.receptionistsService.screening.ifSuccess==='approve', 'label-warning': preBooking.listing.receptionistsService.screening.ifSuccess!=='approve'}" data-ng-bind="preBooking.listing.receptionistsService.screening.ifSuccess"></span>
                    </div>
                    <div class="col-sm-6">
                        Else: <span class="label" data-ng-class="{'label-danger':preBooking.listing.receptionistsService.screening.ifFailed==='decline', 'label-warning': preBooking.listing.receptionistsService.screening.ifFailed==='flag'}" data-ng-bind="preBooking.listing.receptionistsService.screening.ifFailed"></span>
                    </div>
                </div>
            </li>
            <li data-ng-if="!preBooking.items || (!preBooking.items.account.length && !preBooking.items.listing.length)">No pre-booking checklist! </li>
            <li data-ng-if="preBooking.items.account.length"><h5>Account level</h5></li>
            <li data-ng-repeat="listItem in preBooking.items.account">
                <label data-ng-click="preBooking.toggleItem(listItem.item, $index)">
                    <i class="fa" data-ng-class="{'fa-check-square':preBooking.isItemChecked(listItem.item), 'fa-square-o':!preBooking.isItemChecked(listItem.item), 'fa-spinner fa-spin':preBooking.$loading===$index}"></i>
                    {{listItem.item}}
                </label>
            </li>
            <li data-ng-if="preBooking.items.listing.length"><h5>Listing level</h5></li>
            <li data-ng-repeat="listItem in preBooking.items.listing">
                <label data-ng-click="preBooking.toggleItem(listItem.item, $index)">
                    <i class="fa" data-ng-class="{'fa-check-square':preBooking.isItemChecked(listItem.item), 'fa-square-o':!preBooking.isItemChecked(listItem.item), 'fa-spinner fa-spin':preBooking.$loading===$index}"></i>
                    {{listItem.item}}
                </label>
            </li>
            <li>
                <h5>
                    Final decision:
                    <div class="btn-group dropdown" uib-dropdown>
                        <button class="btn btn-default btn-sm dropdown-toggle" type="button" uib-dropdown-toggle>
                            <span data-ng-bind="preBooking.reservation.receptionistsService.screeningOK===true?'OK':preBooking.reservation.receptionistsService.screeningOK===false?'Not OK':'---'"></span>
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" role="menu" uib-dropdown-menu>
                            <li><a href="" data-ng-click="preBooking.setReservationValue('receptionistsService.screeningOK', true, true)">OK</a></li>
                            <li><a href="" data-ng-click="preBooking.setReservationValue('receptionistsService.screeningOK', false, true)">Not OK</a></li>
                            <li><a href="" data-ng-click="preBooking.setReservationValue('receptionistsService.screeningOK', null, true)">Not set</a></li>
                        </ul>
                    </div>
                </h5>
            </li>
        </ul>
    </div>
</div>
