<section data-ng-controller="DashboardTicketControlsController" class="ticket-controls">
	<div class="" data-ng-switch="viewMode">
		<div class="col-sm-4 text-left ticket-toolbar">
            <p class="qa-mode-header-text" data-ng-if="inQaMode">QA Review Mode</p>
			<span data-ng-if="ticket.hasPushedAfterSnooze" class="label label-primary">Snoozed</span>
		</div>
        <div class="col-sm-8 text-right">
           <div class="btn-toolbar ticket-toolbar"  data-ng-switch-when="QA">
               <span class= "ticket-last-reviewed" ng-if="lastTicketReview">Ticket last reviewed on {{lastTicketReview}}</span>
               <!-- Choose level of errors dropdown -->
               <div class="btn-group qa-mode-rating-menu" uib-dropdown>
                   <button class="btn btn-danger" data-ng-click="ticketHasErrors()" type="button" uib-dropdown-toggle title="Ticket error rating">Ticket has errors</button>
               </div>
               <button class="btn btn-success" data-ng-click="ticketWasGood()" title="Ticket was great rating">Ticket was great</button>
           </div>
            <div class="btn-toolbar ticket-toolbar" data-ng-switch-default>
                <!-- copy link to this ticket -->
				<button class="btn btn-default" data-clipboard data-clipboard-text="https://{{locationHost}}/inbox/{{ticket._id}}" title="Copy Ticket URL"><i class="fa fa-clipboard"></i></button>

                <!-- share @deprecated -->
                <button class="btn btn-default" data-ng-click="share()" title="Share">Share</button>

                <!-- snooze ticket -->
                <div class="btn-group" uib-dropdown>
                    <button class="btn btn-default dropdown-toggle" type="button" uib-dropdown-toggle title="Snooze at..">Snooze <b class="caret"></b></button>
                    <ul class="dropdown-menu dropdown-menu-right" role="menu" uib-dropdown-menu>
                        <li data-ng-repeat="option in ::snoozingOptions">
                            <a class="btn" data-ng-if="option>60" data-ng-click="snooze(option)">In {{option/60}} Hours</a>
                            <a class="btn" data-ng-if="option<=60" data-ng-click="snooze(option)">In {{option}} Minutes</a>
                        </li>
                        <li>
                            <a class="btn" data-ng-click="snooze('tomorrow')">Tomorrow Morning</a>
                        </li>
                    </ul>
                </div>


                <!-- pass ticket to someone else -->
                <button class="btn btn-default" data-ng-click="passTicket()">Pass Ticket</button>

                <!-- follow up -->
                <div class="btn-group" uib-dropdown data-ng-if="!ticket.deleted">
                    <button data-ng-show="ticket.repliedToConversation" class="btn btn-default dropdown-toggle" type="button" uib-dropdown-toggle title="Follow up in">
                        <span data-ng-if="!ticket.followUpInMinutes">No follow up</span>
                        <span data-ng-if="ticket.followUpInMinutes">Follow up in <span data-ng-bind="ticket.followUpInMinutes>=60 ? ticket.followUpInMinutes/60 + ' hours' : ticket.followUpInMinutes + ' minutes'"></span></span>
                        <b class="caret"></b>
                    </button>
                    <ul data-ng-show="ticket.repliedToConversation" class="dropdown-menu dropdown-menu-right" role="menu" uib-dropdown-menu>
                        <li><a class="btn" data-ng-click="ticket.followUpInMinutes=0">No follow up</a></li>
                        <li data-ng-repeat="option in ::snoozingOptions">
                            <a class="btn" data-ng-if="option>60" data-ng-click="ticket.followUpInMinutes=option">In {{option/60}} Hours</a>
                            <a class="btn" data-ng-if="option<=60" data-ng-click="ticket.followUpInMinutes=option">In {{option}} Minutes</a>
                        </li>
                    </ul>
				    <button class="btn btn-success" data-ng-hide="ticket.completedAt" data-ng-click="done()" title="Mark as completed"><i class="glyphicon glyphicon-ok"></i></button>
                </div>

                <!-- undo close ticket -->
				<button class="btn btn-primary" data-ng-if="ticket.deleted" data-ng-click="undo()" title="Undo completed"><i class="fa fa-undo"></i></button>
			</div>
		</div>
	</div>
    <!-- big animation for when closing a ticket -->
    <div data-ng-if="ticketHasDone" class="text-center done-ticket bounceIn animated text-success">
		<i class="fa fa-check"></i>
		<div class="service-blessing" ng-bind="serviceBlessing"></div>
	</div>
</section>
