<div data-ng-controller="DashboardListingBoxController as listingBox" data-ng-init="listingBox.init()" data-ng-hide="!listingBox.listing">
	<div class="dashboard-box" ng-class="boxStyle">
		<div class="dashboard-box-icon">
			<i class="fa fa-home"></i>
		</div>
		<div class="dashboard-box-loader" data-ng-if="!listingBox.listing.$resolved">
			<img src="/app/core/img/loaders/loader.gif" alt="Loading"><span></span>
		</div>
		<div class="dashboard-box-content" data-ng-if="listingBox.listing.$resolved">
			<div class="dashboard-box-header">
				<span class="label label-danger" data-ng-if="!listingBox.listing.active">Not Managed</span>
				<span class="label label-danger" data-ng-if="!listingBox.listing.isListed">Not Listed</span>
				<span class="label label-special1" data-ng-if="listingBox.listing.isVirtual">Virtual</span>
				<span class="label label-warning" data-ng-if="listingBox.listing.roomType" data-ng-bind="listingBox.listing.roomType"></span>
				<span class="label label-warning" data-ng-if="listingBox.listing.propertyType" data-ng-bind="listingBox.listing.propertyType"></span>
				<span class="label label-warning" data-ng-if="listingBox.listing.accommodates">
					<span>Max Guests: </span>
				<span data-ng-bind="listingBox.listing.accommodates"></span>
				</span>
				<span class="label label-warning" data-ng-if="listingBox.listing.bedrooms">
					<span data-ng-bind="listingBox.listing.bedrooms"></span>
				<span>Bedrooms</span>
				</span>
				<span class="label label-warning" data-ng-if="listingBox.listing.beds">
					<span data-ng-bind="listingBox.listing.beds"></span>
				<span>Beds</span>
				</span>
			</div>
			<div class="dashboard-box-photo">
				<img class="img-thumbnail" data-ng-src="{{listingBox.listing.picture.thumbnail}}" alt="{{listingBox.listing.title}}" data-ng-click="listingBox.openGallery()" />
			</div>
			<div class="dashboard-box-body">
                <div>
                    <a data-ui-sref="listing.property({listingId: listingBox.listing._id})"  target="_blank">
                        <span class="label label-info" data-ng-if="listingBox.listing.nickname" data-ng-bind="listingBox.listing.nickname"></span>
                        <span data-ng-bind="listingBox.listing.title"></span>
                    </a>
                </div>
                <div>
                    <small>
                        <i class="fa fa-map-marker fa-fw"></i>
                        <span data-ng-bind="listingBox.listing.address.full"></span>
                    </small>

                </div>
                <div>
                    <small>
                        <i class="fa fa-clock-o fa-fw"></i>
                        <span>Local time:</span>
                        <span data-ng-bind="listingBox.now | dateTimezone:listingBox.listing.timezone"></span>
                    </small>
                </div>
                <div>
                    <span ng-if="listingBox.listing.prices.extraPersonFee" class="text-danger">
                        Extra person fee: <span data-ng-bind="listingBox.listing.prices.extraPersonFee | currency:listingBox.listing.prices.currency"></span>
                        (above <ng-pluralize count="listingBox.listing.prices.guestsIncludedInRegularFee" when="{'one':'1 guest', 'other':'{} guests'}"></ng-pluralize>)
                    </span>
                </div>
			</div>
			<div class="dashboard-box-footer">
				<div class="btn-group btn-group-justified">
					<div class="btn-group dropdown" uib-dropdown>
						<button class="btn btn-default dropdown-toggle" type="button" uib-dropdown-toggle>
							<i class="fa fa-usd"></i>
							<span class="caret"></span>
						</button>
						<ul class="dropdown-menu" role="menu" aria-labelledby="reservationMoneyMenu" uib-dropdown-menu>
							<li>
								<a>
									<span>Cancellation policy:</span>
									<span ng-if="listingBox.listing.prices.cancellation" data-ng-bind="listingBox.listing.terms.cancellation | currency:listingBox.listing.prices.currency"></span>
									<span ng-if="!listingBox.listing.prices.cancellation">N/A</span>
								</a>
							</li>
							<li>
								<a>
									<span>Security deposit:</span>
									<span ng-if="listingBox.listing.prices.securityDepositFee" data-ng-bind="listingBox.listing.prices.securityDepositFee | currency:listingBox.listing.prices.currency"></span>
									<span ng-if="!listingBox.listing.prices.securityDepositFee">N/A</span>
								</a>
							</li>
							<li>
								<a>
									<span>Weekly fee:</span>
									<span ng-if="listingBox.listing.prices.weeklyPrice" data-ng-bind="listingBox.listing.prices.weeklyPrice | currency:listingBox.listing.prices.currency"></span>
									<span ng-if="!listingBox.listing.prices.weeklyPrice">N/A</span>
								</a>
							</li>
							<li>
								<a>
									<span>Monthly fee:</span>
									<span ng-if="listingBox.listing.prices.monthlyPrice" data-ng-bind="listingBox.listing.prices.monthlyPrice | currency:listingBox.listing.prices.currency"></span>
									<span ng-if="!listingBox.listing.prices.monthlyPrice">N/A</span>
								</a>
							</li>
							<li>
								<a>
									<span>Cleaning fee:</span>
									<span ng-if="listingBox.listing.prices.cleaningFee" data-ng-bind="listingBox.listing.prices.cleaningFee | currency:listingBox.listing.prices.currency"></span>
									<span ng-if="!listingBox.listing.prices.cleaningFee">N/A</span>
								</a>
							</li>
							<li>
								<a>
									<span>Extra person fee:</span>
									<span ng-if="listingBox.listing.prices.extraPersonFee" data-ng-bind="listingBox.listing.prices.extraPersonFee | currency:listingBox.listing.prices.currency"></span>
									<span ng-if="!listingBox.listing.prices.extraPersonFee">N/A</span>
								</a>
							</li>
						</ul>
					</div>
					<div class="btn-group dropdown" uib-dropdown>
						<button class="btn btn-default dropdown-toggle" type="button" uib-dropdown-toggle>
							<i class="fa fa-external-link-square"></i>
							<span class="caret"></span>
						</button>
						<ul class="dropdown-menu" role="menu" aria-labelledby="reservationMoneyMenu" uib-dropdown-menu>
							<li>
								<a title="{{listingIntegration.platform}} Profile" data-ng-href="{{listingIntegration.externalUrl}}" target="_blank">
									<i class="ri-md icon-{{listingIntegration.platform}}"></i>
									<span>{{listingIntegration.platform}} Profile</span>
								</a>
							</li>
							<li>
								<a title="Google maps" data-ng-href="https://www.google.com/maps/place/{{listingBox.listing.address.searchable}}" target="_blank">
									<i class="fa fa-map-marker"></i>
									<span>Google maps</span>
								</a>
							</li>
							<li>
								<a title="Yelp" data-ng-href="http://www.yelp.com/search?find_desc=&sortby=rating&find_loc={{listingBox.listing.address.searchable}}" target="_blank">
									<i class="fa fa-yelp"></i>
									<span>Yelp</span>
								</a>
							</li>
							<li>
								<a title="Weather" data-ng-href="http://forecast.io/#/f/{{listingBox.listing.address.lat}},{{listingBox.listing.address.lng}}" target="_blank">
									<i class="fa fa-cloud"></i>
									<span>Weather</span>
								</a>
							</li>
                            <li>
                                <link-parkopedia address="listingBox.listing.address.searchable"></link-parkopedia>
                            </li>
							<li>
								<link-uber-estimate address="listingBox.listing.address.searchable"></link-uber-estimate>
							</li>

						</ul>
                    </div>
                    <div class="btn-group" role="group">
						<button class="btn btn-default" data-ng-click="listingBox.openCalendar()" title="Listing's calendar"><i class="fa fa-calendar"></i></button>
                    </div>
                    <div class="btn-group" role="group">
						<button class="btn btn-default" data-ng-click="listingBox.openListingModal()">Open</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
