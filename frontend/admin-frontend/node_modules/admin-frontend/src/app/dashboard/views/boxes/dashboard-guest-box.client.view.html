<div data-ng-controller="DashboardGuestBoxController as guestBox" data-ng-init="guestBox.init()">
    <div class="dashboard-box" data-ng-if="guestBox.guest">
        <div class="dashboard-box-icon">
            <i class="fa fa-suitcase"></i>
        </div>
        <div class="dashboard-box-loader" data-ng-if="!guestBox.guest.$resolved">
            <img src="/app/core/img/loaders/loader.gif" alt="Loading"><span></span>
        </div>
        <div class="dashboard-box-content" data-ng-if="guestBox.guest.$resolved">
            <div class="dashboard-box-header">
                <span data-ng-if="guestBox.guest.hasVerifiedId" class="label label-success">Verified</span>
                <span data-ng-repeat="verification in guestBox.guest.verifications track by $index">
                    <span class="label label-warning" data-ng-bind="verification"></span>
                </span>
            </div>
            <div class="dashboard-box-photo" data-ng-if="guestBox.guest.pictures.length">
                <img class="img-thumbnail" data-ng-src="{{guestBox.guest.pictures[0].regular || guestBox.guest.pictures[0].thumbnail}}" alt="{{guestBox.guest.fullName}}" />
            </div>
            <div class="dashboard-box-body">
                <div class="row">
                    <div class="col-md-12 text-left">
                        <div>
                            <span data-ng-bind="guestBox.guest.fullName"></span>
                        </div>
                        <div data-ng-if="guestBox.guest.email">
                            <small>
                                <i class="fa fa-envelope fa-fw"></i>
                                <a class="text-nowrap" data-ng-href="mailto:{{guestBox.guest.email}}" data-ng-bind="guestBox.guest.email"></a>
                            </small>
                        </div>
                        <div data-ng-if="guestBox.guest.phone">
                            <i class="fa fa-phone"></i>
                            <a href="tel:{{guestBox.guest.phone}}" data-ng-bind="guestBox.guest.phone"></a>
                        </div>
                        <div data-ng-if="guestBox.guest.hometown">
                            <small>
                                <i class="fa fa-map-marker fa-fw"></i>
                                <span data-ng-bind="guestBox.guest.hometown"></span>
                            </small>
                        </div>
                        <div data-ng-if="guestBox.guest.timezone">
                            <small>
                                <i class="fa fa-clock-o fa-fw"></i>
                                <span>Local time:</span>
                                <span data-ng-bind="now | dateTimezone: guestBox.guest.timezone"></span>
                            </small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="dashboard-box-footer">
                <div class="btn-group btn-group-justified">
                    <div class="btn-group">
                        <button class="btn btn-default" data-ng-click="guestBox.openGuest()">Edit</button>
                    </div>
                    <div class="btn-group" data-ng-if="!guestBox.guest.verified">
                        <button class="btn btn-default" data-ng-click="guestBox.verify(ticket.reservationRequestId, reservation.mainGuestExternalId)" data-ng-disabled="ticket.askedToVerify">Verify</button>
                    </div>
                    <div class="btn-group" data-ng-if="guestBox.guest.airbnb.url" >
                        <a class="btn btn-default" data-ng-href="{{guestBox.guest.airbnb.url}}" target="_blank">
                            <i class="ri-md icon-airbnb"></i>
                            <span>Airbnb Profile</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
