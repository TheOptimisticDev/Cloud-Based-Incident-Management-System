'use strict';

//Setting up route
angular.module('inbox').config(['$stateProvider',
    function($stateProvider) {
        // Inbox state routing
        $stateProvider.
        state('inbox', {
            url: '/inbox',
            abstract: true,
            controller : 'InboxController',
            template: '<ui-view>',
            resolve: {
                viewMode: function() {
                    return 'DEFAULT';
                }
            }
        })
        .state('inbox.ticket', {
            url: '/:ticketId',
            controller : 'InboxController',
            templateUrl: 'app/inbox/views/view-inbox.client.view.html',
        })
        .state('inbox.ticketqa', {
            url: '/:ticketId/qa',
            controller : 'InboxController',
            templateUrl: 'app/inbox/views/view-inbox.client.view.html',
            resolve : {
                viewMode: function(Authentication) {
                    // Make sure only those with permission to see qa mode can see it
                    if (Authentication.isAuthorized(['receptionists-reviewer', 'admin'])) {
                        return 'QA';
                    } else {
                        return 'DEFAULT';
                    }
                }
            }
        });
    }
]);
