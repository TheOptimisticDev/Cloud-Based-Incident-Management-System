FROM node:7-alpine as builder
WORKDIR ./app
COPY ./frontend/admin-frontend ./
RUN  apk add --no-cache --virtual .build-deps \
     make \
     g++ \
     git \
     python && \
     npm install -g bower gulp && \
     bower install --allow-root  && \
     npm install && \
     npm run build && \
     apk del .build-deps

FROM nginx:1.13-alpine
COPY --from=builder /app/dist/* /usr/share/nginx/html/
